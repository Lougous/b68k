# Notes on simulation

## gate level models

### metastability resolver registers

Simulation is done with gate level models (with timing) generated by Quartus. These models reports timing violation seen by any register in the design, even for registers intentionnaly used as metastability resolver. This has two consequences: the transcript is flooded by unwanted violation reports and X is propagated throughout the design ...

As a consequence SDO files must be patched manually to disable timing check for these kind of registers.

<pre><code>  [...]
  (CELL
    (CELLTYPE "flex10ke_lcell_register")
    (INSTANCE WE_meta.lereg)
    (DELAY
      (ABSOLUTE
        (PORT aclr (3600:3600:3600) (3600:3600:3600))
        (PORT clk (2500:2500:2500) (2500:2500:2500))
        (IOPATH (posedge clk) regout (1100:1100:1100) (1100:1100:1100))
        (IOPATH (posedge aclr) regout (1200:1200:1200) (1200:1200:1200))
      )
    )
    <mark><s>(TIMINGCHECK</s></mark>
    <mark><s>     (SETUP datain (posedge clk) (2500:2500:2500))</s></mark>
    <mark><s>     (HOLD datain (posedge clk) (1600:1600:1600))</s></mark>
    <mark><s>)</s></mark>
  )
  [...]
</pre></code>

### debug

Signal in gate level models are not always what there name suggest in regards to names in design file ... RTL simulation is a better option for functionnal debug, while gate level simulation offers timing representativity.

